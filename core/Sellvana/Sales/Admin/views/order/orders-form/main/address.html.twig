{% set order = THIS.get('order') %}
{% set type = THIS.get('type') %}
{% set addr = order.addressAsArray(type) %}
{% set countries = APP.instance('FCom_Core_Main').getAllowedCountries() %}

<div id="{{ type }}-section-view">
    <p><strong>{{ order.fullName(type) }}</strong></p>
    <p>{{ order.addressAsHtml(type) | raw }}</p>
    {% if addr.phone %}<p>{{ 'Phone: %s'|_(addr.phone) }}</p>{% endif %}
    {% if addr.fax %}<p>{{ 'Fax: %s'|_(addr.fax) }}</p>{% endif %}
</div>
<div id="{{ type }}-section-edit" hidden>
    <div class="row no-gutter">
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_firstname]" placeholder="{{ 'First'|_ }}" value="{{ addr.firstname }}">
        </div>
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_lastname]" placeholder="{{ 'Last'|_ }}" value="{{ addr.lastname }}">
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_street1]" placeholder="{{ 'Street Line 1'|_ }}" value="{{ addr.street1 }}">
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_street2]" placeholder="{{ 'Street Line 2'|_ }}" value="{{ addr.street2 }}">
        </div>
    </div>
    <div class="row no-gutter">
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_city]" placeholder="{{ 'City'|_ }}" value="{{ addr.city }}">
        </div>
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_postcode]" placeholder="{{ 'Zip/Postal Code'|_ }}" value="{{ addr.postcode }}">
        </div>
    </div>
    <div class="row no-gutter">
        <div class="col-md-6">
            <input type="text" class="geo-region form-control input-sm" name="order[{{ type }}_region]" placeholder="{{ 'Region'|_ }}" value="{{ addr.region }}">
            <select class="geo-region form-control input-sm" name="order[{{ type }}_region]" style="display:none"></select>
        </div>
        <div class="col-md-6">
            <select class="form-control geo-country input-sm" name="order[{{ type }}_country]">
                {{ UTIL.optionsHtml(countries, addr.country) | raw }}
            </select>
        </div>
    </div>
    <div class="row no-gutter">
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_phone]" placeholder="{{ 'Phone'|_ }}" value="{{ addr.phone }}">
        </div>
        <div class="col-md-6">
            <input type="text" class="form-control input-sm" name="order[{{ type }}_fax]" placeholder="{{ 'Fax'|_ }}" value="{{ addr.fax }}">
        </div>
    </div>
</div>