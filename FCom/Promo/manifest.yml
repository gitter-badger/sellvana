modules:
    FCom_Promo:
        version: 0.1.13
        channel: beta
        require: { module: { FCom_Catalog: 0.1.0, FCom_Sales: 0.2.0 }}
        description: "Promotions module"

        observe:
            - [ FCom_Sales_Workflow_Cart::customerAddsCouponCode, FCom_Promo_Main.onWorkflowCustomerAddsCouponCode ]
            - [ FCom_Sales_Model_Cart_Total_Discount::calculate, FCom_Promo_Main.onCartDiscountCalculate ]

        auto_use: [ bootstrap, views, layout ]

        default_config:
            modules:
                FCom_Promo:
                    display:
                        locationPages: { home_page: "Home Page", category_page: "Category Page", product_page: "Product Page", cart_page: "Cart", success_page: "Success Page", custom_hook: "Custom Hook" }
                        locationPageOptions:
                            home_page:     {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", home: "home"}
                            category_page: {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", category: "category"}
                            product_page:  {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", product: "product"}
                            cart_page:     {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", cart: "cart"}
                            success_page:  {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", success: "success"}
                            custom_hook:   {below_product_name: "Below Product Name", below_add_to_cart_block: "Below Add To Cart Block", above_description_block: "Above Description  Block", above_add_to_cart_button: "Above Add To Cart Button", hook: "hook"}


        areas:
            FCom_Admin:
                routing:
                    - [ "/promo", FCom_Promo_Admin_Controller.index ]
                    - [ "/promo/coupons/view", FCom_Promo_Admin_Controller.coupons_grid ]
                    - [ "/promo/coupons/generate", FCom_Promo_Admin_Controller.coupons_generate ]
                    - [ "/promo/coupons/import", FCom_Promo_Admin_Controller.coupons_import ]
                    - [ "/promo/.action", FCom_Promo_Admin_Controller ]

                    - ["/promo/conditions/.action", FCom_Promo_Admin_Controller_Conditions]
                    - [ "/promo/form/:id/products", FCom_Promo_Admin_Controller.form_products ]
                    - [ "/promo/form/:id/group", FCom_Promo_Admin_Controller.form_group ]

            FCom_Frontend:
                routing:
                    - [ /promo/?.action, FCom_Promo_Frontend_Controller ]
                    - [ /promo/cart/?.action, FCom_Promo_Frontend_Controller_Cart ]
                observe:
                    - [ "FCom_Sales_Model_Cart::calculateTotals", "FCom_Promo_Frontend::onPromoCartValidate" ]
                    - [ "FCom_Sales_Model_Cart::addProduct", "FCom_Promo_Frontend::onPromoCartAddProduct" ]
                    - [ "BLayout::hook:promotions", FCom_Promo_Frontend_Controller.hook_promotions ]
