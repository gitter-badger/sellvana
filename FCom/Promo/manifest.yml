modules:
	FCom_Promo:
		version: 0.1.2
		require: { module: { FCom_Catalog: 0.1.0 }}
		description: "Promotions module"
        
        areas:
            FCom_Admin:
                auto_use: all
                routing:
                    - [ get, /promo, FCom_Promo_Admin_Controller.index ]
                    - [ any, /promo/.action, FCom_Promo_Admin_Controller ]

                    - [ get, /promo/form/:id/products, FCom_Promo_Admin_Controller.form_products ]
                    - [ get, /promo/form/:id/group, FCom_Promo_Admin_Controller.form_group ]
                    - [ get, /promo/attachments, FCom_Promo_Admin_Controller.attachments ]
                    - [ get, /promo/attachments/download, FCom_Promo_Admin_Controller.attachments_download ]
                    - [ post, /promo/attachments/:do, FCom_Promo_Admin_Controller.attachments_post ]

            FCom_Frontend:
                auto_use: [ views, layout ]
                routing:
                    - [ get, /promo/media, FCom_Promo_Frontend_Controller.media ]
                observe:
                    - [ FCom_Checkout_Model_Cart::calcTotals, FCom_Promo_Frontend::onPromoCartValidate ];
                    - [ FCom_Checkout_Model_Cart::addProduct, FCom_Promo_Frontend::onPromoCartAddProduct ];
                    - [ BLayout::hook.promotions, FCom_Promo_Frontend_Controller.hook_promotions ]