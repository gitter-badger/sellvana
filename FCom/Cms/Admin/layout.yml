base:
    - view: admin/nav
        do:
            - [ addNav, cms, { label: CMS, pos: 200, icon_class: icon-folder-open } ]
            - [ addNav, cms/blocks, { label: Blocks, href: /cms/blocks } ]
            - [ addNav, cms/nav, { label: Navigation, href: /cms/nav } ]
            #- [ addNav, cms/pages, { label: Pages, href: /cms/pages } ]

/cms/nav:
    - { include: base }
    - { include: form }
    - { hook: main, views: cms/nav }
    - { view: admin/nav, do: [[ setNav, cms/nav ]] }

/cms/nav/tree_form:
    - { root: cms/nav-tree-form }
    - view: cms/nav-tree-form
        set: { tab_view_prefix: cms/nav-tree-form/ }
        do:
            - [ addTab, main, { label: Navigation Node, pos: 10 } ]
            - [ addTab, content, { label: Page Content, pos: 20 } ]

/cms/pages:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, cms/pages ]] }

/cms/pages/form:
    - { include: base }
    - { include: form }
    - { hook: main, views: admin/form }
    - { view: admin/nav, do: [[ setNav, cms/pages ]] }
    - view: admin/form
        set: { tab_view_prefix: cms/pages-form/ }
        do:
            - [ addTab, main, { label: CMS Page, pos: 10 } ]
            - [ addTab, history, { label: History, pos: 20 } ]

/cms/blocks:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, cms/blocks ]] }

/cms/blocks/form:
    - { include: base }
    - { include: form }
    - { hook: main, views: admin/form }
    - { view: admin/nav, do: [[ setNav, cms/blocks ]] }
    - view: admin/form
        set: { tab_view_prefix: cms/blocks-form/ }
        do:
            - [ addTab, main, { label: CMS Block, pos: 10 } ]
            - [ addTab, page, { label: Page Options, pos: 20 } ]
            - [ addTab, history, { label: History, pos: 50 } ]

/settings:
    - { view: settings, do: [[ addTab, FCom_Cms, { label: Cms, group: catalog, async: true } ]] }
