<style>
    .fcom-chat-window-container { position:fixed; bottom:0; right:0; border:solid 1px #888; width:300px; height:400px; z-index:9999; padding:3px; background:#EEE; }
    .fcom-chat-window-inner { position:relative; width:100%; height:100%; padding:3px; }
    .fcom-chat-title { position:absolute; top:3px; left:3px; width:90%; height:20px; }
    .fcom-chat-close-trigger { position:absolute; color:red; top:3px; right:3px; }
    .fcom-chat-history { position:absolute; background:#FFF; top:23px; left:3px; right:3px; bottom:43px; padding:3px; overflow-y:auto; }
    .fcom-chat-input { position:absolute; bottom:3px; left:3px; width:285px; height:30px; }
</style>

{% set isLoggedIn = APP.instance('FCom_Admin_Model_User').isLoggedIn() %}
{% if false %}
    <div class="adminchat-container">
        {% if isLoggedIn %}
            <button id="adminchat-test">Test Chat</button>
            <select id="adminuser-status">
                {{ UTIL.optionsHtml({online:'Online', away:'Away', na:'N/A', offline:'Offline'}) | raw }}
            </select>
        {% endif %}
    </div>
{% endif %}
<script>
    require(['jquery', 'fcom.adminchat'], function($, AdminChat) {
        AdminChat.init({
            username:"{{ APP.instance('FCom_Admin_Model_User').sessionUser().username }}",
            status:'{{ isLoggedIn?"online":"offline" }}'
        })

        $('#adminchat-test').click(function(ev) {
            AdminChat.start({user:'user1'});
        });
        $('#adminuser-status').change(function(ev) {
            AdminChat.status({status:this.value});
        });
    })
</script>
