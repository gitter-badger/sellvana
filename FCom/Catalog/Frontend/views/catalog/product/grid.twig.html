{{ THIS.view('catalog/product/pager').set('state', THIS.get('products_data').state) | raw }}

{% if not THIS.get('products_data').state.c %}

    <p class="note-msg">{{ "There are no products matching the selection." |_ }}</p>

{% else %}
    {{ THIS.view('catalog/compare/block') | raw }}
    <div class="product-listing">
        <ul>
        {% for p in THIS.get('products') %}
            <li class="item">
                <img src="{{ p.thumbUrl(125, 125) }}" width="160" height="160" class="product-image" alt="{{ p.get('product_name') }}"/>
                <span class="product-name"><a href="{{ p.url(THIS.get('category')) }}">{{ p.get('product_name') }}</a></span>
                <div class="rateit" data-rateit-value="{{p.get('avg_rating')}}"></div>
                {{ '%s of 5' | _(p.get('avg_rating')) }}
                {% if p.get('num_reviews') %}
                    (<a href="{{ p.url(THIS.get('category')) }}#reviews">{{ '%s reviews' | _(p.get('num_reviews')) }}</a>)
                {% endif %}
                {{ THIS.view('catalog/product/price', {'prod': p}) | raw }}
                <button class="button btn-add-to-cart" onclick="FCom.cart.add({{ p.id() }}, 1)"><em class="icon"></em><span>{{ "Add to Cart" |_ }}</span></button>
                <p><label for="wishlist-{{ p.id() }}"><input type="checkbox" id="wishlist-{{ p.id() }}"/> {{ 'Wishlist' |_ }}</label></p>
                <p><label for="compare-{{ p.id() }}"><input type="checkbox" name="compare" class="compare-checkbox" id="compare-{{ p.id() }}" value="{{ p.id() }}"/> {{ 'Compare' |_ }}</label></p>
            </li>
        {% endfor %}
        </ul>
    </div>
{% endif %}