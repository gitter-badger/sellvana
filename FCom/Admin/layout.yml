base:
  - { root: root }
  - { hook: head, views: head }
  - { hook: header, views: admin/header }
  - { hook: top-nav, views: admin/nav }
  - { hook: before_body_end, views: bottom_scripts }

  - { callback: FCom_Core_Main::defaultThemeCustomLayout }
  - { callback: FCom_Admin_Admin::layout }

  - { include: common_js_libs }
  - { include: lib_admin_theme1 }

  - view: head
    do:
      - [ meta, Content-Type, "text/html; charset=UTF-8", true ]
      - [ icon, @FCom_Core/favicon.ico ]
      #- [ js, @FCom_Core/js/lib/head.min.js ]
      #- [ css, @FCom_Core/css/bootstrap-3.min.css ]
      #- [ css, @FCom_Admin/compass/css/screen.css ]
      #- [ js, @FCom_Core/js/lib/html5shiv.min.js, { if: lt IE 9 } ]
      #- [ js, @FCom_Core/js/lib/es5-shim.min.js, { if: lt IE 9 } ]
      #- [ js, //ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js ]
      #- [ css, @FCom_Core/js/lib/css/smoothness/jquery-ui-1.8.17.custom.css ]

      - [ css, @FCom_Admin/theme1/assets/stylesheets/jquery/jquery_ui.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/plugins/bootstrap_daterangepicker/bootstrap-daterangepicker.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/plugins/fullcalendar/fullcalendar.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/plugins/common/bootstrap-wysihtml5.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/bootstrap/bootstrap.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/light-theme.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/theme-colors.css ]
      - [ css, @FCom_Admin/theme1/assets/stylesheets/demo.css ]
      - [ css, @FCom_Admin/css/fcom.admin.css ]

      - [ js, @FCom_Admin/theme1/assets/javascripts/ie/html5shiv.js, { if: lt IE 9 } ]
      - [ js, @FCom_Admin/theme1/assets/javascripts/ie/respond.min.js, { if: lt IE 9 } ]

      - [ css, @FCom_Core/js/select2/select2.css ]
      - [ css, @FCom_Core/css/fcom.core.css ]
      #- [ css, //ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/smoothness/jquery-ui.min.css ]
      #- [ css, @FCom_Core/js/lib/css/layout-default-latest.css ]
      #- [ css, @FCom_Core/js/lib/css/jquery.pnotify.default.css ]      #- [ css, @FCom_Core/bootstrap/css/bootstrap-responsive.min.css ]

      #- [ js, @FCom_Core/js/lib/json2.js ]
      #- [ js, //ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js ]
      #- [ js, @FCom_Core/js/lib/angular.min.js ]
      #- [ js, @FCom_Core/js/lib/jquery.ba-hashchange.min.js ]
      #- [ requireModulePath, FCom_Admin ]
      - [ requireJs, jquery.cookie, @FCom_Core/js/lib/jquery.cookie, { deps: [ jquery ] } ]
      - [ requireJs, jquery.hotkeys, @FCom_Core/js/lib/jquery.hotkeys, { deps: [ jquery ] } ]
      #- [ requireJs, @FCom_Core/js/lib/jquery.layout-latest.min.js ]
      #- [ js, @FCom_Core/js/lib/jquery.pnotify.min.js ]
      #- [ js, @FCom_Core/js/select2/select2.min.js ]
      # highcharts
      - [ requireJs, highcharts, @FCom_Admin/js/highcharts/highcharts, { deps: [ jquery ] } ]

      - [ requireJs, ckeditor, @FCom_Core/js/lib/ckeditor/ckeditor, { deps: [ jquery ] } ]
      - [ requireJs, ckeditor-jquery, @FCom_Core/js/lib/ckeditor/adapters/jquery, { deps: [ jquery, ckeditor ] } ]
      - [ requireJs, fcom.admin, @FCom_Admin/js/fcom.admin ]
      - [ requireJs, fcom.admin.form, @FCom_Admin/js/fcom.admin.form ]
      - [ requireRun, fcom.admin ]

  - { include: grid }
  - { include: jqgrid }
  - { include: jstree }
  - { include: lib_backgrid }

  - view: head
    do:
      #- [ css, @FCom_Admin/css/fcom.admin.css ] # need to be separate from other CSS for correct ordering in styling

  - view: admin/nav
    do:
      - [ addNav, dashboard, { label: Dashboard, href: /, pos: 10, icon_class: icon-dashboard } ]
      - [ addNav, modules, { label: Modules, pos: 800, icon_class: icon-puzzle-piece } ]
      - [ addNav, modules/installed, { label: Installed Modules, href: /modules } ]
      - [ addNav, system, { label: System, pos: 900, icon_class: icon-cog } ]
      - [ addNav, system/users, { label: Users, href: /users  } ]
      - [ addNav, system/roles, { label: Roles & Permissions, href: /roles  } ]
      - [ addNav, system/settings, { label: Settings, href: /settings, class: system-settings } ]

  - view: admin/header
    do:
      - [ addShortcut, system/users, { label: New User, href: /users/form } ]

lib_admin_theme1:
  - view: head
    do:
      - [ requireJs, autosize, @FCom_Admin/theme1/assets/javascripts/plugins/autosize/jquery.autosize-min, { deps: [ jquery ] } ]
      - [ requireJs, bootbox, @FCom_Admin/theme1/assets/javascripts/plugins/bootbox/bootbox.min, { deps: [ jquery ] } ]
      - [ requireJs, daterangepicker, @FCom_Admin/theme1/assets/javascripts/plugins/bootstrap_daterangepicker/bootstrap-daterangepicker, { deps: [ jquery ] } ]
      - [ requireJs, datetimepicker, @FCom_Admin/theme1/assets/javascripts/plugins/bootstrap_datetimepicker/bootstrap-datetimepicker, { deps: [ jquery ] } ]
      - [ requireJs, hoverdropdown, @FCom_Admin/theme1/assets/javascripts/plugins/bootstrap_hover_dropdown/twitter-bootstrap-hover-dropdown.min, { deps: [ jquery ] } ]
      - [ requireJs, maxlength, @FCom_Admin/theme1/assets/javascripts/plugins/bootstrap_maxlength/bootstrap-maxlength.min, { deps: [ jquery ] } ]
      - [ requireJs, switch, @FCom_Admin/theme1/assets/javascripts/plugins/bootstrap_switch/bootstrapSwitch.min, { deps: [ jquery ] } ]
      - [ requireJs, charcount, @FCom_Admin/theme1/assets/javascripts/plugins/charCount/charCount, { deps: [ jquery ] } ]
      - [ requireJs, ckeditor, @FCom_Admin/theme1/assets/javascripts/plugins/ckeditor/ckeditor, { deps: [ jquery ] } ]
      - [ requireJs, wysihtml5, @FCom_Admin/theme1/assets/javascripts/plugins/common/wysihtml5.min, { deps: [ jquery ] } ]
      - [ requireJs, moment, @FCom_Admin/theme1/assets/javascripts/plugins/common/moment.min ]
      - [ requireJs, bootstrap-wysihtml5, @FCom_Admin/theme1/assets/javascripts/plugins/common/bootstrap-wysihtml5, { deps: [ wysihtml5, bootstrap ] } ]
      - [ requireJs, dynatree, @FCom_Admin/theme1/assets/javascripts/plugins/dynatree/jquery.dynatree.min, { deps: [ jquery ] } ]
      - [ requireJs, fileinput, @FCom_Admin/theme1/assets/javascripts/plugins/fileinput/bootstrap-fileinput.min, { deps: [ jquery ] } ]

      - [ requireJs, tmpl, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/tmpl.min, { deps: [ jquery ] } ]
      - [ requireJs, load-image, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/load-image.min, { deps: [ jquery ] } ]
      - [ requireJs, canvas-to-blob, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/canvas-to-blob.min, { deps: [ jquery ] } ]
      - [ requireJs, iframe-transport, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/jquery.iframe-transport.min ]
      - [ requireJs, fileupload, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/jquery.fileupload.min ]
      - [ requireJs, fileupload-fp, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/jquery.fileupload-fp.min ]
      - [ requireJs, fileupload-ui, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/jquery.fileupload-ui.min ]
      - [ requireJs, fileupload-init, @FCom_Admin/theme1/assets/javascripts/plugins/fileupload/jquery.fileupload-init ]

      - [ requireJs, fuelux.wizard, @FCom_Admin/theme1/assets/javascripts/plugins/fuelux/wizard, { deps: [ jquery ] } ]
      - [ requireJs, fullcalendar, @FCom_Admin/theme1/assets/javascripts/plugins/fullcalendar/fullcalendar, { deps: [ jquery ] } ]
      - [ requireJs, inputmask, @FCom_Admin/theme1/assets/javascripts/plugins/input_mask/bootstrap-inputmask.min, { deps: [ jquery ] } ]
      - [ requireJs, jgrowl, @FCom_Admin/theme1/assets/javascripts/plugins/jgrowl/jquery.jgrowl.min, { deps: [ jquery ] } ]
      - [ requireJs, touchpunch, @FCom_Admin/theme1/assets/javascripts/plugins/jquery_ui_touch_punch/jquery.ui.touch-punch.min, { deps: [ jquery, jquery-ui ] } ]
      - [ requireJs, lightbox, @FCom_Admin/theme1/assets/javascripts/plugins/lightbox/lightbox.min, { deps: [ jquery ] } ]
      - [ requireJs, mention, @FCom_Admin/theme1/assets/javascripts/plugins/mention/mention.min, { deps: [ jquery ] } ]
      - [ requireJs, modernizr, @FCom_Admin/theme1/assets/javascripts/plugins/modernizr/modernizr.min ]
      - [ requireJs, mention, @FCom_Admin/theme1/assets/javascripts/plugins/mention/mention.min, { deps: [ jquery ] } ]
      - [ requireJs, nestable, @FCom_Admin/theme1/assets/javascripts/plugins/nestable/jquery.nestable, { deps: [ jquery ] } ]
      - [ requireJs, pwstrength, @FCom_Admin/theme1/assets/javascripts/plugins/nestable/jpwstrength, { deps: [ jquery ] } ]
      - [ requireJs, retina, @FCom_Admin/theme1/assets/javascripts/plugins/retina/retina ]
      - [ requireJs, select2, @FCom_Admin/theme1/assets/javascripts/plugins/select2/select2, { deps: [ jquery ] } ]
      - [ requireJs, slidernav, @FCom_Admin/theme1/assets/javascripts/plugins/slider_nav/slidernav-min, { deps: [ jquery ] } ]
      - [ requireJs, slimscroll, @FCom_Admin/theme1/assets/javascripts/plugins/slimscroll/jquery.slimscroll.min, { deps: [ jquery ] } ]
      - [ requireJs, sparklines, @FCom_Admin/theme1/assets/javascripts/plugins/sparklines/jquery.sparkline.min, { deps: [ jquery ] } ]
      - [ requireJs, tabdrop, @FCom_Admin/theme1/assets/javascripts/plugins/tabdrop/bootstrap-tabdrop, { deps: [ jquery ] } ]
      - [ requireJs, timeago, @FCom_Admin/theme1/assets/javascripts/plugins/timeago/jquery.timeago, { deps: [ jquery ] } ]
      - [ requireJs, typeahead, @FCom_Admin/theme1/assets/javascripts/plugins/typeahead/typeahead, { deps: [ jquery ] } ]
      - [ requireJs, timeago, @FCom_Admin/theme1/assets/javascripts/plugins/timeago/jquery.timeago, { deps: [ jquery ] } ]
      - [ requireJs, jquery.validate, @FCom_Admin/theme1/assets/javascripts/plugins/validate/jquery.validate.min, { deps: [ jquery ] } ]

      - [ js, @FCom_Admin/theme1/assets/javascripts/jquery/jquery.min.js, { alias: jquery } ]
      - [ requireJs, jquery-mobile, @FCom_Admin/theme1/assets/javascripts/jquery/jquery.mobile.custom.min, { deps: [ jquery ] } ]
      - [ requireJs, jquery-ui, @FCom_Admin/theme1/assets/javascripts/jquery/jquery-ui.min, { deps: [ jquery ] } ]
      - [ requireJs, jquery-migrate, @FCom_Admin/theme1/assets/javascripts/jquery/jquery-migrate.min, { deps: [ jquery ] } ]
      - [ requireJs, bootstrap, @FCom_Admin/theme1/assets/javascripts/bootstrap/bootstrap.min, { deps: [ jquery ] } ]

      - [ requireJs, admin.theme, @FCom_Admin/theme1/assets/javascripts/theme, { deps: [ jquery, timeago ] } ]
      - [ requireJs, admin.demo, @FCom_Admin/theme1/assets/javascripts/demo, { deps: [ jquery ] } ]

      - [ requireRun, [ jquery-mobile, jquery-ui, jquery-migrate, bootstrap, admin.theme, admin.demo ] ]

jqgrid:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/jqGrid/ui.jqgrid.css ]
      - [ css, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.css ]

      # - [ css, @FCom_Core/js/lib/jqGrid/css/ui.jqgrid.css ]

      # - [ css, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.css ]

      - [ requireJs, jqgrid.ui.multiselect, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect ]
      - [ requireJs, jqgrid.i18n.en, @FCom_Core/js/lib/jqGrid/i18n/grid.locale-en, { deps: [ jquery ] } ]
      - [ requireJs, jqgrid, @FCom_Core/js/lib/jqGrid/jquery.jqGrid.min, { deps: [ jquery, jqgrid.i18n.en ], exports: $.fn.jqgrid } ]
      - [ requireJs, jqgrid.tablednd, @FCom_Core/js/lib/jqGrid/plugins/jquery.tablednd, { deps: [ jqgrid ] } ]
      - [ requireJs, jqgrid.contextmenu, @FCom_Core/js/lib/jqGrid/plugins/jquery.contextmenu, { deps: [ jqgrid ] } ]

      # - [ js, @FCom_Core/js/lib/jqGrid/plugins/ui.multiselect.js ]

      # - [ js, @FCom_Core/js/lib/jqGrid/js/i18n/grid.locale-en.js ]
      # - [ js, @FCom_Core/js/lib/jqGrid/dist/jquery.jqGrid.min.js ]

      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.base.js ] # jqGrid base
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.common.js ] # jqGrid common for editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.formedit.js ] # jqGrid Form editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.inlinedit.js ] # jqGrid inline editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.celledit.js ] # jqGrid cell editing
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.subgrid.js ] #jqGrid subgrid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.treegrid.js ] #jqGrid treegrid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.grouping.js ] #jqGrid grouping
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.custom.js ] #jqGrid custom
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.tbltogrid.js ] #jqGrid table to grid
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.import.js ] #jqGrid import
      # - [ js, @FCom_Core/js/lib/jqGrid/js/jquery.fmatter.js ] #jqGrid formater
      # - [ js, @FCom_Core/js/lib/jqGrid/js/JsonXml.js ] # xmljson utils
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.jqueryui.js ] # jQuery UI utils
      # - [ js, @FCom_Core/js/lib/jqGrid/js/grid.filter.js ] # filter Plugin

jstree:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/themes/default/style.css ]
      - [ requireJs, jstree, @FCom_Core/js/lib/jquery.jstree, { deps: [ jquery, jquery.hotkeys, jquery.cookie ] } ]

mcdropdown:
  - view: head
    do:
      - [ css, @FCom_Core/js/lib/css/jquery.mcdropdown.css ]
      - [ requireJs, jquery.bgiframe, @FCom_Core/js/lib/jquery.bgiframe, { deps: [ jquery ] } ]
      - [ requireJs, mcdropdown, @FCom_Core/js/lib/jquery.mcdropdown, { deps: [ jquery, jquery.bgiframe ] } ]

codemirror:
  - view: head
    do:
      - [ css, @FCom_Admin/js/codemirror/lib/codemirror.css ]
      - [ requireJs, codemirror, @FCom_Admin/js/codemirror/lib/codemirror ]
      - [ requireJs, codemirror-loadmode, @FCom_Admin/js/codemirror/addon/mode/loadmode, { deps: [ coremirror ] } ]

flot:
  - view: head
    do:
      - [ requireJs, excanvas, @FCom_Admin/js/flot/excanvas.min ]
      - [ requireJs, jquery.colorhelpers, @FCom_Admin/js/flot/jquery.colorhelpers.min, { deps: [ jquery ] } ]
      - [ requireJs, flot, @FCom_Admin/js/flot/jquery.flot.min, { deps: [ jquery ] } ]
      - [ requireJs, flot.canvas, @FCom_Admin/js/flot/jquery.flot.canvas.min, { deps: [ flot ] } ]
      - [ requireJs, flot.categories, @FCom_Admin/js/flot/jquery.flot.categories.min, { deps: [ flot ] } ]
      - [ requireJs, flot.crosshair, @FCom_Admin/js/flot/jquery.flot.crosshair.min, { deps: [ flot ] } ]
      - [ requireJs, flot.errorbars, @FCom_Admin/js/flot/jquery.flot.errorbars.min, { deps: [ flot ] } ]
      - [ requireJs, flot.fillbetween, @FCom_Admin/js/flot/jquery.flot.fillbetween.min, { deps: [ flot ] } ]
      - [ requireJs, flot.image, @FCom_Admin/js/flot/jquery.flot.image.min, { deps: [ flot ] } ]
      - [ requireJs, flot.navigate, @FCom_Admin/js/flot/jquery.flot.navigate.min, { deps: [ flot ] } ]
      - [ requireJs, flot.pie, @FCom_Admin/js/flot/jquery.flot.pie.min, { deps: [ flot ] } ]
      - [ requireJs, flot.resize, @FCom_Admin/js/flot/jquery.flot.resize.min, { deps: [ flot ] } ]
      - [ requireJs, flot.selection, @FCom_Admin/js/flot/jquery.flot.selection.min, { deps: [ flot ] } ]
      - [ requireJs, flot.stack, @FCom_Admin/js/flot/jquery.flot.stack.min, { deps: [ flot ] } ]
      - [ requireJs, flot.symbol, @FCom_Admin/js/flot/jquery.flot.symbol.min, { deps: [ flot ] } ]
      - [ requireJs, flot.time, @FCom_Admin/js/flot/jquery.flot.time.min, { deps: [ flot ] } ]
      - [ requireJs, flot.threshold, @FCom_Admin/js/flot/jquery.flot.threshold.min, { deps: [ flot ] } ]

form:
  - view: head
    do:
      #- [ css, @FCom_Core/js/lib/themes/default/style.css ]
  - { include: jstree }
  - { include: lib_cleditor }

404:
  - { include: base }
  - { hook: main, views: 404 }

/:
    - { include: base }
    - { include: flot }
    - { hook: main, views: dashboard }
    - { view: admin/nav, do: [[ setNav, dashboard ]] }
    - view: head
      do:
        - [ requireJs, ModalLauncher, @FCom_Admin/js/BackboneViews/ModalLauncher ]
        - [ requireJs, FormView, @FCom_Admin/js/BackboneViews/FormView ]

/denied:
    - { include: base }
    - { hook: main, views: denied }


/login:
    - { include: base }
    - { include: form }
    - { hook: main, views: login }

/password/recover:
    - { include: base }
    - { include: form }
    - { hook: main, views: password/recover }

/password/reset:
    - { include: base }
    - { include: form }
    - { hook: main, views: password/reset }


/my_account:
    - { include: base }
    - { hook: main, views: my_account, use_meta: true }

/reports:
    - { include: base }
    - { hook: main, views: reports }

/users:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, system/users ]] }

/users/form:
    - { include: base }
    - { include: form }
    - { view: admin/nav, do: [[ setNav, system/users ]] }
    - { hook: main, views: admin/form }
    - view: admin/form
      set: { tab_view_prefix: users-form/ }
      do:
        - [ addTab, main, { label: General Info } ]
        - [ addTab, history, { label: History } ]

/roles:
    - { include: base }
    - { hook: main, views: admin/grid }
    - { view: admin/nav, do: [[ setNav, system/roles ]] }

/roles/form:
    - { include: base }
    - { include: form }
    - { view: admin/nav, do: [[ setNav, system/roles ]] }
    - { hook: main, views: admin/form }
    - view: admin/form
      set: { tab_view_prefix: roles-form/ }
      do:
        - [ addTab, main, { label: Permissions } ]
        - [ addTab, users, { label: Users } ]

/settings:
    - { include: base }
    - { include: form }
    - { include: codemirror }
    - { hook: main, views: settings }
    - { view: admin/nav, do: [[ setNav, system/settings ]] }
    - view: settings
      set: { tab_view_prefix: settings/ }
      do:
        - [ addTabGroup, other, { label: Other, pos: 900 } ]
        - [ addTabGroup, areas, { label: Areas, pos: 10 } ]
        - [ addTab, FCom_Core, { label: Fulleron Core, group: areas, async: true } ]
        - [ addTab, FCom_Admin, { label: Fulleron Admin, group: areas, async: true } ]
        - [ addTab, FCom_Frontend, { label: Fulleron Frontend, group: areas, async: true } ]

/modules:
    - { include: base }
    - { hook: main, views: modules }
    - { view: admin/nav, do: [[ setNav, modules/installed ]] }
