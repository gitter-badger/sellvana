{% set loggedIn = APP.instance('FCom_Customer_Model_Customer').isLoggedIn() %}
{% set cart = APP.instance('FCom_Sales_Model_Cart').sessionCart() %}
{% set cartItems = cart.items() %}
{% set shipping_estimates = SESSION.data('shipping_estimate') %}
{% set checkout_methods = APP.instance('FCom_Sales_Main').getCheckoutMethods() %}


{% if false == cartItems %}
    <div class="alert">{{ "You have an empty cart." |_ }}</div>
{% else %}

    <div id="maincontainer">
      <section id="product">
        <div class="container">
         <!--  breadcrumb -->
          <ul class="breadcrumb">
            <li>
              <a href="#">Home</a>
              <span class="divider">/</span>
            </li>
            <li class="active"> Shopping Cart</li>
          </ul>
          <h1 class="heading1"><span class="maintext"> Shopping Cart</span><span class="subtext"> All items in your  Shopping Cart</span></h1>
          <!-- Cart-->
          <div class="cart-info">
            <table class="table table-striped table-bordered">
              <tr>
                <th class="image">Image</th>
                <th class="name">Product Name</th>
                <th class="model">Model</th>
                <th class="quantity">Qty</th>
                  <th class="total">Action</th>
                <th class="price">Unit Price</th>
                <th class="total">Total</th>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Jeans</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>


              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">T-shirt</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Shirt</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Camera</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Mobile</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Jeans</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
              <tr>
                <td class="image"><a href="#"><img title="product" alt="product" src="img/prodcut-40x40.jpg" height="50" width="50"></a></td>
                <td  class="name"><a href="#">Jeans</a></td>
                <td class="model">Purchased Product</td>
                <td class="quantity"><input type="text" size="1" value="1" name="quantity[40]" class="col-lg-1">

                 </td>
                 <td class="total"> <a href="#"><img class="tooltip-test" data-original-title="Update" src="img/update.png" alt=""></a>
                  <a href="#"><img class="tooltip-test" data-original-title="Remove"  src="img/remove.png" alt=""></a></td>


                <td class="price">$120.68</td>
                <td class="total">$120.68</td>

              </tr>
            </table>
          </div>
          <div class="cartoptionbox">
            <h4 class="heading4"> Choose if you have a discount code or reward points you want to use or would like to estimate your delivery cost. </h4>
            <input type="radio" class="radio">
            Use Coupon Code <br>
            <input type="radio" class="radio">
            Use Gift Voucher <br>
            <input type="radio" class="radio" checked="checked">
            Estimate Shipping & Taxes <br><br>
            <form class="form-vertical form-inline">
              <h4 class="heading4"> Enter your destination to get a shipping estimate.</h4>
              <fieldset>
                <div class="control-group">
                  <label  class="control-label">Select list</label>
                  <div class="controls">
                    <select  class="col-lg-3 cartcountry">
                      <option>Country:</option>
                      <option>United Kindom</option>
                      <option>United States</option>
                    </select>
                    <select class="col-lg-3 cartstate">
                      <option>Region / State:</option>
                      <option>Angus</option>
                      <option>highlands</option>
                    </select>
                    <input type="submit" value="Get Quotes" class="btn btn-orange">
                  </div>
                </div>
              </fieldset>
            </form>
          </div>
          <div class="container">
          <div>
              <div class="col-lg-4 pull-right">
                <table class="table table-striped table-bordered ">
                  <tr>
                    <td><span class="extra bold">Sub-Total :</span></td>
                    <td><span class="bold">$101.0</span></td>
                  </tr>
                  <tr>
                    <td><span class="extra bold">Eco Tax (-5.00) :</span></td>
                    <td><span class="bold">$11.0</span></td>
                  </tr>
                  <tr>
                    <td><span class="extra bold">VAT (18.2%) :</span></td>
                    <td><span class="bold">$21.0</span></td>
                  </tr>
                  <tr>
                    <td><span class="extra bold totalamout">Total :</span></td>
                    <td><span class="bold totalamout">$150.28</span></td>
                  </tr>
                </table>
                <input type="submit" value="CheckOut" class="btn btn-orange pull-right">
                <input type="submit" value="Continue Shopping" class="btn btn-orange pull-right mr10">
              </div>
            </div>
            </div>
        </div>
      </section>
    </div>

    <div class="col-cart-left">
        <header class="page-title">
            <h1 class="title">{{ "Shopping Cart" |_ }}</h1>
        </header>
        <form name="cart" action="{{ APP.href('cart/add') }}" method="post">
            <table class="table">
                <col width="30"/>
                <col width="60"/>
                <col/>
                <col width="120"/>
                <col width="80"/>
                <col width="120"/>
                <thead>
                    <tr>
                        <th class="text-center">{{ 'Remove' |_ }}</th>
                        <th colspan="2" class="text-left">{{ "Product" |_ }}</th>
                        <th class="text-right">{{ "Price" |_ }}</th>
                        <th class="text-center">{{ "Qty" |_ }}</th>
                        <th class="text-right">{{ "Subtotal" |_ }}</th>
                    </tr>
                </thead>
                <tbody>
                {% for item in cartItems %}
                    {% set p = item.product() %}
                    {% if p %}
                        <tr id="tr-product-{{ p.id }}">
                            <td class="text-center"><label><input type="checkbox" name="remove[]" class="remove-checkbox f-none" value="{{ item.id }}"></label></td>
                            <td>
                                <img src="{{ p.thumbUrl(80, 80) }}" width="80" height="80" class="product-image" alt="{{ p.product_name }}"/>
                            </td>
                            <td>
                                <span class="product-name"><a href="{{ p.url(THIS.get('category')) }}">{{ p.product_name }}</a></span>
                            </td>
                            <td class="text-right">
                                <div class="price-box {{ loggedIn ? 'logged-in' : 'logged-out' }}">
                                    <div class=""><span class="price">{{ p.base_price | currency }}</span></div>
                                </div>
                            </td>
                            <td class="text-center">
                                <input type="text" size="3" name="qty[{{ item.id }}]" class="qty" value="{{ item.qty*1 }}"/>
                            </td>
                            <td class="text-right">
                                <div class="price-box">
                                    <div class=""><span class="price">{{ item.rowTotal() | currency }}</span></div>
                                </div>
                            </td>
                        </tr>
                    {% endif %}
                {% endfor %}
                </tbody>
                <tfoot>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><button type="submit" class="btn">{{ "Update Cart" |_ }}</button></td>
                    <td class="text-right"><span class="cart-subtotal">{{ cart.get('subtotal') | currency }}</span></td>
                </tfoot>
            </table>
        </form>
        <section class="row">
            <form action="{{ APP.href('cart/add') }}" method="post" class="col-md-6 control-group form-inline">
                <label for="" class="control-label">{{ "Promo Code" |_ }}</label>
                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the </p>
                <div class="controls">
                  <input type="text"/>
                  <button class="btn">{{ "Submit" |_ }}</button>
                </div>
            </form>
            <form action="{{ APP.href('cart/add') }}" method="post" class="col-md-6">
                <header>{{ "Shipping Estimate" |_ }}</header>
                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the </p>
                {% if (shipping_estimates) %}
                    <ul class="shipping-estimates">
                        {% for estimate in shipping_estimates %}
                            <li>{{ estimate.description }} ({{ estimate.estimate | currency }})</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <div class="control-group>
                  <label for="" class="control-label">{{ "Post code" |_ }}</label>
                  <div class="controls">
                    <input type="text" size="4" name="postcode" value=""/>
                    <button type="submit" class="btn">{{ "Submit" |_ }}</button>
                  </div>
            </form>
        </section>
        {{ THIS.hook('promotions') | raw }}
    </div>
    <div class="col-cart-right">
        <div class="cart-totals">
            <table>
                {% for total in cart.getTotals() %}
                    {% if not total.isHidden() %}
                        <tr class="{{ total.getRowClass() }}">
                            <td>{{ total.getLabelFormatted() }}</td>
                            <td>{{ total.getValueFormatted() }}</td>
                        </tr>
                    {% endif %}
                {% endfor %}
            </table>
        </div>
        <ul class="checkout-btns">
            {% for checkout in checkout_methods %}
                {% set button = checkout.getCartCheckoutButton() %}
                {% if button %}
                    <li>
                        {% if button.html %}
                            {{ button.html | raw }}
                        {% else %}
                            <a href="{{ button.href }}" class="button btn-sz2"><span>{{ button.label |_ }}</span></a>
                        {% endif %}
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
    <div class="clearfix"></div>
    <br/><br/>
{% endif %}

